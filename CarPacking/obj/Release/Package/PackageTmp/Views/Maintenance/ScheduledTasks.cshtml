@model List<CarPacking.Models.MaintenanceTask>

@{
    ViewBag.Title = "Scheduled Maintenance Tasks";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .tasks-container {
        max-width: 1000px;
        margin: 50px auto;
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

        .tasks-container h2 {
            text-align: center;
            color: #343a40;
            margin-bottom: 30px;
        }

    .task-item {
        margin-bottom: 30px;
        padding: 20px;
        background-color: #ffffff;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

        .task-item h4 {
            margin-bottom: 10px;
            color: #007bff;
        }

        .task-item p {
            margin: 5px 0;
            color: #495057;
            font-size: 16px;
        }

        .task-item table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }

        .task-item th, .task-item td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .task-item th {
            background-color: #007bff;
            color: white;
        }

        .task-item .status-pending {
            color: #ffc107;
        }

        .task-item .status-completed {
            color: #28a745;
        }

        .task-item .personnel, .task-item .updates {
            margin-top: 20px;
        }

        .task-item .update {
            font-size: 14px;
            color: #6c757d;
        }
</style>

<div class="tasks-container">
    <h2>Scheduled Maintenance Tasks</h2>

    @foreach (var task in Model)
    {
        <div class="task-item">
            <h4>Task: @task.TaskDescription</h4>
            <p><strong>Scheduled Date:</strong> @task.ScheduledDate.ToString("dd-MM-yyyy")</p>
            <p>
                <strong>Status:</strong>
                <span class="@(task.IsCompleted ? "status-completed" : "status-pending")">
                    @(task.IsCompleted ? "Completed" : "Pending")
                </span>
            </p>

            <div class="equipment">
                <h5>Equipment Details</h5>
                <table>
                    <tr>
                        <th>Equipment Name</th>
                        <td>@task.Equipment.Name</td>
                    </tr>
                    
                    <tr>
                        <th>Decription</th>
                        <td>@task.Equipment.Description</td>
                    </tr>
                    <!-- Add any other relevant equipment details here -->
                </table>
            </div>

            <div class="personnel">
                <h5>Assigned Personnel</h5>
                <table>
                    <tr>
                        <th>Name</th>
                        <th>Skill Level</th>
                        <th>Availability</th>
                    </tr>
                    @foreach (var personnel in task.AssignedPersonnel)
                    {
                        <tr>
                            <td>@personnel.PersonnelName</td>
                            <td>@personnel.SkillLevel</td>
                            <td>@(personnel.IsAvailable ? "Available" : "Unavailable")</td>
                        </tr>
                    }
                </table>
            </div>

            <div class="updates">
                <h5>Recent Updates</h5>
                @if (task.MaintenanceUpdates.Any())
                {
                    <ul>
                        @foreach (var update in task.MaintenanceUpdates.OrderByDescending(u => u.UpdateTime))
                        {
                            <li class="update"><strong>@update.UpdateTime.ToString("dd-MM-yyyy HH:mm"):</strong> @update.UpdateDescription</li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">No updates available.</p>
                }
            </div>
        </div>
    }
</div>
